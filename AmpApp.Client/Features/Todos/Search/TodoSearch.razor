@page "/todo/search"
@using AmpApp.Shared.Models.Todo
@using Zamp.Client.Components.Grid

@inject TodoGridDataService TodoGridDataService
@inject NavigationManager NavigationManager

<search-page>
    <AmpPageTitle Title="To Do Search"/>
    <AmpGrid DataService="TodoGridDataService"
             TGridRowDto="TodoGridRowDto"
             TGridCriteriaModel="TodoGridCriteriaModel"
             OnGotoButtonClicked='() => NavigationManager.NavigateTo($"uc/DetailPage/{TodoGridDataService.GetSelectedRowId}")'
             OnAddNewButtonClicked='() => NavigationManager.NavigateTo($"uc/AddNewPage/{TodoGridDataService.GetSelectedRowId}")'
             OnEditButtonClicked='() => NavigationManager.NavigateTo($"uc/EditPage/{TodoGridDataService.GetSelectedRowId}")'
             OnDeleteButtonClicked='() => NavigationManager.NavigateTo($"uc/DeletePage/{TodoGridDataService.GetSelectedRowId}")'
             ShowDisablePaginationCheckbox="true"
             ColumnWidths="repeat(2,auto) 1fr">
        <HeaderRowFragment>
            <AmpGridCell Text="Title" OnClick='() => context("Title")'/>
            <AmpGridCell Text="Description" OnClick='() => context("Description")'/>
            <AmpGridCell Text="Complete" OnClick='() => context("IsComplete")'/>
        </HeaderRowFragment>
        <BodyRowFragment Context="row">
            <AmpGridCell Text="@row.Title"/>
            <AmpGridCell Text="@row.Description"/>
            <AmpGridCell Text="@row.IsComplete.ToString()"/>
        </BodyRowFragment>
    </AmpGrid>

</search-page>


@code {
    protected override async Task OnInitializedAsync()
    {
        await TodoGridDataService.LoadRowsAsync();
        await base.OnInitializedAsync();
    }
}